name: Linting and Testing
on:
  pull_request:
  push:
env:
  DATABASE_URL: sqlite:///./sql_l.db
jobs:
 lint:
   runs-on: ubuntu-latest
   steps:
     - uses: actions/checkout@v3
     - uses: actions/setup-python@v4
       with:
          python-version: "3.11"
     - uses: Gr1N/setup-poetry@v8
     - run: poetry --version
     - run: poetry install
     - run: poetry run uvicorn main:app --reload &
     - run: poetry run mypy .
     - run: poetry run black .
     - run: poetry run pytest
